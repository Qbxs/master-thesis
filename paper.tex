%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% LaTeX-Rahmen fuer das Erstellen von Masterarbeiten
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% allgemeine Einstellungen
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[twoside,12pt,a4paper]{report}
%\usepackage{reportpage}
\usepackage{amsmath}
\usepackage{bbold}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage{mathrsfs}
\usepackage{scalerel}
\usepackage{epsf}
\usepackage{graphics, graphicx}
\usepackage{latexsym}
\usepackage[margin=10pt,font=small,labelfont=bf]{caption}
\usepackage[utf8]{inputenc}
\usepackage[toc,page]{appendix}
\usepackage{subcaption}
\usepackage{tikz-cd}
\usetikzlibrary{cd}

\usepackage{amsthm}
\newtheorem{definition}{Definition}

\usepackage[hyphens]{url} % 'hyphens' option allows line breaks after "-" characters
\usepackage[ colorlinks = true
           , linkcolor = black
           , anchorcolor = black
           , citecolor = black
           , urlcolor = blue]{hyperref}

\usepackage{lineno}
\linenumbers
\usepackage{listings}
% basic duo style
\lstdefinestyle{duoStyle}{%
    morekeywords={if, then, else instance, class, >>, CBV, CBN, +, -, =>, case, of, cocase, mu, def, prd, cns, cmd, :=},
    keywordstyle=\ttfamily\bfseries\color{blue!80!black},
    mathescape=true
    %moredelim=**[is][\bfseries]{|}{|}
}
\lstset{style=duoStyle}

\usepackage{minted}


\usepackage{bussproofs}
\EnableBpAbbreviations
\def\ScoreOverhang{0pt}
\def\buildNoScoreTight{% Make an hbox with no score
 \global\setbox\myBoxD=\hbox{\vbox{\vskip0pt}}% 0pt instead of 1pt
}
\def\noLine{% noLine with less space between lines
 \gdef\buildScore{\buildNoScoreTight}%
 \ignorespaces%
}

% Inference rules
\newcommand{\subPosRule}{\RightLabel{\textsc{Sub}$^+$}}
\newcommand{\subNegRule}{\RightLabel{\textsc{Sub}$^-$}}
\newcommand{\instanceDeclRule}{\RightLabel{\textsc{Decl}}}
\newcommand{\meetRule}{\RightLabel{\textsc{Meet}}}
\newcommand{\joinRule}{\RightLabel{\textsc{Join}}}
\newcommand{\axiomPos}{\RightLabel{\textsc{Axiom}$^+$}}
\newcommand{\axiomNeg}{\RightLabel{\textsc{Axiom}$^-$}}
\newcommand{\topRule}{\RightLabel{\textsc{Top}}}
\newcommand{\botRule}{\RightLabel{\textsc{Bot}}}

\newcommand\deriveRule{
  {\hskip.1in}
  $\stackrel{\mathit{drv}}{\rightsquigarrow}$
  {\hskip.1in}}

\newcommand{\ctx}{\ensuremath{\Gamma \; \vdash \;}}
\newcommand{\opeq}{\ensuremath{\stackrel{op}{\simeq}}}

% Symbols
\newcommand\join{\vee}
\newcommand\meet{\wedge}
\newcommand\sub{\ensuremath{\leqslant}}

% Text
\newcommand\Showable{\ensuremath{\Psi_\mathit{Show}}}
\newcommand\Readable{\ensuremath{\Psi_\mathit{Read}}}
\newcommand\Defaultable{\ensuremath{\Psi_\mathit{Default}}}
\newcommand\Ordable{\ensuremath{\Psi_\mathit{Ord}}}
\newcommand\instance[2]{{\bf instance} \; #1(#2)}

% Terms
\newcommand\caseof[1]{{\bf case}\; #1 \;{\bf of}}
\newcommand\showTerm{{\bf show}\;}
\newcommand\readTerm{{\bf read}\;}
\newcommand\ifthenelseTerm{{\bf ifthenelse}\;}
\newcommand\eq{{\bf eq}\;}

% Types
\newcommand\Nat{\mathbb{N}}
\newcommand\Int{\mathbb{Z}}
\newcommand\Unit{\mathbb{U}}
\newcommand\Bool{\mathbb{B}}
\newcommand\Singleton[1]{\mathbb{#1}}
\newcommand\String{\mathit{String}}

% Witnesses
\newcommand\cov{\mathit{cov}}
\newcommand\contrav{\mathit{contrav}}
\newcommand\inv{\mathit{inv}}
% relational composition operator
\newcommand*{\comp}{\mathbin{\raise 0.6ex\hbox{\oalign{\hfil$\scriptscriptstyle
            		 \rm o$\hfil\cr\hfil$\scriptscriptstyle\rm 9$\hfil}}}}
\newcommand\refl{\mathit{refl}}
\newcommand\topW{\mathit{top}}
\newcommand\natPrim{\mathit{natPrim}}
\newcommand\botW{\mathit{bot}}
\newcommand\meetW{\mathit{meet}}
\newcommand\joinW{\mathit{join}}
\newcommand\inW[1]{\mathit{in}_{#1}}
\newcommand\proj[1]{\mathit{proj}_{#1}}
\newcommand\funcW{\mathit{func}}
\newcommand\unfoldL{\mathit{unfold}_{L}}
\newcommand\unfoldR{\mathit{unfold}_{R}}

\newcommand\constraintGen[1]{\ensuremath{\llbracket #1 \rrbracket}}
\newcommand\toConstr{\ensuremath{\hookrightarrow}}
\newcommand\decompose[2]{\ensuremath{{\mathbf{decompose}}(#1 \sub #2)}}

\usepackage{mathpartir}

\textwidth 14cm
\textheight 22cm
\topmargin 0.0cm
\evensidemargin 1cm
\oddsidemargin 1cm
%\footskip 2cm
\parskip0.5explus0.1exminus0.1ex

% Kann von Student auch nach pers\"onlichem Geschmack ver\"andert werden.
\pagestyle{headings}

\sloppy

% not working as intended
% \newcommand{\textHaskell}{1}{\mint{Haskell}|$1|}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% hier steht die neue Titelseite 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 
\begin{titlepage}
 \begin{center}
  {\LARGE Eberhard Karls Universit\"at T\"ubingen}\\
  {\large Mathematisch-Naturwissenschaftliche Fakult\"at \\
Wilhelm-Schickard-Institut f\"ur Informatik\\[4cm]}
  {\huge Master Thesis Informatics\\[2cm]}
  {\Large\bf  Type Class Coherence with Subtyping\\[1.5cm]}
 {\large Pascal Engel}\\[0.5cm]
Datum\\[4cm]
{\small\bf Reviewers}\\[0.5cm]
  \parbox{7cm}{\begin{center}{\large Name Erstgutachter}\\
   (Informatik)\\
  {\footnotesize Wilhelm-Schickard-Institut f\"ur Informatik\\
	Universit\"at T\"ubingen}\end{center}}\hfill\parbox{7cm}{\begin{center}
  {\large Name Zweitgutachter}\\
  (Informatik)\\
  {\footnotesize Wilhelm-Schickard-Institut f\"ur Informatik\\
	Universit\"at T\"ubingen}\end{center}
 }
  \end{center}
\end{titlepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Titelr"uckseite: Bibliographische Angaben
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\thispagestyle{empty}
\vspace*{\fill}
\begin{minipage}{11.2cm}
\textbf{Engel, Pascal:}\\
\emph{Type Class Coherence with Subtyping}\\ Master Thesis Informatics\\
Eberhard Karls Universit\"at T\"ubingen\\
Thesis period: von-bis
\end{minipage}
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagenumbering{roman}
\setcounter{page}{1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Seite I: Zusammenfassug, Danksagung
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section*{Abstract}

In this work we aim to bring together three notions of polymorphism:
Subtyping as a form of ad hoc polymorphism, parametric polymorphism and ad-hoc polymorphism in the form  of type classes.
We do so by extending the research language \texttt{duo}, which already supports algebraic subtyping, with type classes.
In order to ensure type class coherence we argue for a restrictive way of implementing instances for types that are in the subtyping relation.

% \newpage
% \section*{Acknowledgements}

% Write here your acknowledgements.

\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Table of Contents
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand{\baselinestretch}{1.3}
\small\normalsize

\tableofcontents

\renewcommand{\baselinestretch}{1}
\small\normalsize

\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Der Haupttext, ab hier mit arabischer Numerierung
%%% Mit \input{dateiname} werden die Datei `dateiname' eingebunden
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagenumbering{arabic}
\setcounter{page}{1}

%% Introduction
\input{chapters/intro}
\cleardoublepage

%%
\input{chapters/polymorphism}
\cleardoublepage

%% 
\input{chapters/theory}
\cleardoublepage

%%
\input{chapters/typechecking.tex}
\cleardoublepage

%% 
\input{chapters/implementation.tex}
\cleardoublepage

%%
\input{chapters/results}
\cleardoublepage

%%
% \input{chapters/discussion}
\cleardoublepage


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Appendix
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix

\chapter{Haskell Code to construct subtyping witnesses}

\inputminted{Haskell}{./Witnesses.hs}

\cleardoublepage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Bibliographie
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\addcontentsline{toc}{chapter}{Bibliography}

\bibliographystyle{alpha}
\bibliography{literature}

\cleardoublepage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Erklaerung
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\thispagestyle{empty}
\section*{Selbst\"andigkeitserkl\"arung}

Hiermit versichere ich, dass ich die vorliegende Masterarbeit 
selbst\"andig und nur mit den angegebenen Hilfsmitteln angefertigt habe und dass alle Stellen, die dem Wortlaut oder dem 
Sinne nach anderen Werken entnommen sind, durch Angaben von Quellen als 
Entlehnung kenntlich gemacht worden sind. 
Diese Masterarbeit wurde in gleicher oder \"ahnlicher Form in keinem anderen 
Studiengang als Pr\"ufungsleistung vorgelegt. 

\vskip 3cm

Ort, Datum	\hfill Unterschrift \hfill 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Ende
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}

